# 隐私策略

JSBox 的键盘不会获取用户正在输入的内容，也不会将对用户的输入进行任何形式的记录或者上传操作。

为了保证脚本功能的正常使用，需要在系统设置里打开“**允许完全访问**”。

当完全访问被关闭时，键盘上的扩展会有诸多限制，例如：

- 无法访问网络
- 无法访问地理位置
- 无法访问剪贴板数据
- 无法访问 iCloud
- 无法访问主应用的一些设置

请你根据自己的需要权衡是否为 JSBox 打开“允许完全访问”，但我们需要指出的是，即便允许完全访问被打开，我们也不会通过技术手段对用户的输入做任何操作。

请放心使用。

---

## 文件内容解读与示例

### 用途说明：键盘扩展的隐私与安全

本文档详细阐述了 JSBox 键盘扩展的**隐私策略**以及“**允许完全访问**”这一关键系统设置的含义。由于键盘扩展能够访问用户在任何应用中输入的内容，因此其隐私和安全性是用户最为关注的问题。理解这份文档对于用户和开发者都至关重要。

### 核心概念：键盘扩展与“完全访问”

1.  **键盘扩展的特殊性**: iOS 上的第三方键盘扩展具有高度的权限，它们可以访问用户在任何文本输入框中键入的内容。这使得用户对键盘的隐私和安全格外敏感。

2.  **“允许完全访问” (Allow Full Access)**: 这是 iOS 系统为第三方键盘提供的一个安全机制。默认情况下，第三方键盘是受限的，无法访问网络、剪贴板等敏感资源。当用户在系统设置中为某个键盘开启“允许完全访问”后，该键盘扩展将获得更广泛的能力，包括：
    -   **网络访问**: 能够连接互联网，例如用于在线翻译、获取表情包等。
    -   **地理位置访问**: 如果脚本需要。
    -   **剪贴板数据访问**: 能够读取和写入剪贴板内容。
    -   **iCloud 访问**: 能够访问 iCloud Drive 中的文件。
    -   **与主应用通信**: 能够与 JSBox 主应用进行数据交换和功能调用。

### JSBox 的隐私承诺

文档明确指出，JSBox 键盘扩展即使在开启了“允许完全访问”的情况下，也**不会**获取、记录或上传用户正在输入的内容。这是 JSBox 开发者对用户隐私的郑重承诺，旨在建立用户信任。

### 用户权衡与选择

-   **功能与隐私的平衡**: 许多强大的 JSBox 键盘脚本（例如，需要联网查询、访问剪贴板的脚本）必须开启“允许完全访问”才能正常工作。用户需要根据自己的需求和对 JSBox 的信任程度，来权衡是否开启此权限。
-   **透明度**: 开发者应向用户清晰地解释脚本需要“完全访问”的原因，以及它将如何使用这些权限。

### 示例：功能受限的键盘脚本

下面的概念性代码展示了一个键盘脚本在“完全访问”开启和关闭时的不同行为。

```javascript
// 假设这是一个自定义翻译键盘脚本

// 在键盘扩展的入口点
if ($app.env === $env.keyboard) {
  // 假设 $keyboard.hasFullAccess 可以判断是否开启了完全访问
  // 实际中，你可能需要尝试调用一个需要完全访问的 API 来判断
  const hasFullAccess = $keyboard.hasFullAccess; // 这是一个假设的属性

  $ui.render({
    views: [
      {
        type: "button",
        props: { title: "翻译选中文字" },
        layout: $layout.fill,
        events: {
          tapped: async () => {
            if (hasFullAccess) {
              const selectedText = $keyboard.selectedText;
              if (selectedText) {
                $ui.toast("正在翻译...");
                // 模拟网络请求进行翻译
                // const translatedText = await $http.get("https://api.translate.com?text=" + encodeURIComponent(selectedText));
                const translatedText = "[翻译结果]" + selectedText;
                $keyboard.delete(); // 删除原文
                $keyboard.insert(translatedText); // 插入译文
              } else {
                $ui.toast("请先选中文字。");
              }
            } else {
              $ui.alert({
                title: "功能受限",
                message: "翻译功能需要开启键盘的‘允许完全访问’权限。请前往系统设置 -> 通用 -> 键盘 -> 键盘 -> JSBox - 完全访问。"
              });
            }
          }
        }
      }
    ]
  });
} else {
  $ui.alert("此脚本只能作为键盘扩展运行。");
}
```

**代码解读**：

这个示例说明了，如果用户没有开启“允许完全访问”，依赖网络（如翻译）或剪贴板等功能的键盘脚本将无法正常工作。脚本会检测到权限不足，并提示用户去开启。这强调了“允许完全访问”对于键盘扩展功能的重要性，同时也提醒开发者需要妥善处理权限不足的情况。 

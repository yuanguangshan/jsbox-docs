# 数据类型

我们通过 JavaScript 与 Native 代码进行通信，这里面涉及到数据类型的问题，我们要在 JavaScript 层面产生 Native 代码需要的数据。

JavaScript 的基本数据类型例如 `number`, `boolean` 都会自动完成转换，但是在 iOS 的各种 API 尤其是界面相关的 API 里面，会有很多别的数据类型，例如颜色，大小。

这里的目的是通过提供一些内置的方法让 js 容易的产生这些数据。

当然，这一部分其实是一个参考表，你需要的时候来这里查就行了，不必细读。

# 利弊权衡

这实际上是权衡利弊之后的做法，实际上还有另一种做法是每次 JavaScript 都传递 Object 给 iOS，这样的话 JSBox 在内部完成数据的解析。

但是那样写起来可能并不会比提供很多构造方法要简单，另外是一致性方面很难保证，JSBox 内部要做太多太多的数据类型转换，很容易出错。

---

## 文件内容解读与示例

### 用途说明：一篇“设计哲学”的介绍

本文档是“数据”章节的**前言**，它不介绍任何具体的 API，而是阐述了 JSBox 在处理数据时的一个核心**设计哲学**：**我们为什么需要 `$color`, `$size`, `$rect` 这些特殊的函数？**

### 核心问题：连接两个不同的世界

JSBox 的魔法在于它让 JavaScript 能够直接驱动原生的 iOS 功能。但这带来了两种语言“世界”之间的数据类型差异问题：

- **JavaScript 的世界**: 有 `string`, `number`, `boolean`, `object` 等基本类型。
- **原生 iOS (Objective-C/Swift) 的世界**: 有 `UIColor`, `CGSize`, `CGRect`, `NSData` 等更复杂、更具体的结构体和对象。

虽然 `number` 等简单类型可以被自动转换，但当你想要创建一个“颜色”或“尺寸”时，JSBox 如何知道你的意图？

### JSBox 的解决方案：构造函数 (`$`) 

JSBox 的选择是提供一系列以 `$` 开头的**全局构造函数**。你可以把它们想象成一个个“适配器”或“转换器”。

- 当你在 JS 中调用 `$color("red")` 时，你得到的不是一个简单的字符串 `'red'`，而是一个 JSBox 在底层为你创建的、能够被原生 iOS 系统直接理解的 `UIColor` 对象。
- 当你调用 `$rect(0, 0, 100, 50)` 时，你正在创建一个原生 iOS 布局系统能够识别的 `CGRect` 结构体。

正如文档中所说，这种方式比传递一个普通的 JS 对象（如 `{ x: 0, y: 0, width: 100, height: 50 }`）要更明确、更不容易出错。它强迫开发者在一开始就创建出类型正确的数据，避免了后续 JSBox 内部进行复杂和模糊的猜测与转换。

### 概念示例：构造一个 UI 视图

看看下面这个熟悉的 UI 组件定义，几乎每一行都用到了本章节将要介绍的构造函数：

```javascript
{
  type: "view",
  props: {
    // 调用 $color() 来创建一个原生 UIColor 对象
    bgcolor: $color("tint"), 
    // 调用 $rect() 来创建一个原生 CGRect 结构体
    frame: $rect(10, 10, 100, 100)
  },
  views: [
    {
      type: "label",
      props: {
        // 调用 $font() 来创建一个原生 UIFont 对象
        font: $font("bold", 18),
        // 调用 $insets() 来创建一个原生 UIEdgeInsets 结构体
        insets: $insets(5, 5, 5, 5)
      }
    }
  ]
}
```

### 总结

“数据”这一章节的核心，就是学习如何使用这些以 `$` 开头的构造函数，来创建出符合原生 iOS 规范的各种数据类型。接下来的 `method.md` 和 `object.md` 将会详细列出所有这些可用的“数据转换器”。 

> 控制 JSBox 内的脚本是很有用的，这里将提供两个实用的例子

- 导入 AirDrop 到 JSBox 内的文件：[sync-inbox](https://github.com/cyanzhong/xTeko/blob/master/extension-demos/sync-inbox.js)
- 获取在线的扩展：[addin-gallery](https://github.com/cyanzhong/xTeko/blob/master/extension-demos/addin-gallery.js)

JSBox 默认并不会提供任何安装脚本的方式，这是出于安全考虑。

---

## 文件内容解读

### 文件用途

本文档并非直接提供代码，而是给出了两个高级应用示例的链接，这两个示例展示了如何联合运用 `$addin` API 与其他 JSBox 功能（如文件系统、网络请求和UI）来构建强大的自动化工具。同时，文档最后强调了一个核心的**安全设计理念**。

### 示例深度解析

由于无法在此直接展示代码，我们将对这两个示例的功能和可能的技术实现进行分析，帮助你理解其设计思路。

#### 1. `sync-inbox.js`：文件同步与自动化安装

- **功能目标**：JSBox 有一个特殊的 `inbox://` 目录，用于接收从其他应用（如邮件、微信）或通过 AirDrop 发送过来的文件。这个示例脚本的作用就是检查这个“收件箱”，并自动化处理其中的文件。

- **实现猜想与技术解读**：
  1.  **文件扫描**：脚本会使用 `$file.list("inbox://")` 来列出收件箱中的所有文件。
  2.  **逻辑判断**：脚本会遍历文件列表，判断文件类型。例如，如果发现一个 `.js` 或 `.box`（JSBox脚本包）后缀的文件，它就会认为这是一个待安装的脚本。
  3.  **自动化安装**：识别出脚本文件后，它会使用 `$file.read(filePath)` 读取文件内容，然后调用 `$addin.save()` 方法，将这个文件动态安装成一个新的脚本。对于非脚本文件，它可能会移动到其他指定文件夹。

- **应用场景**：这个功能非常实用。比如，你在电脑上写好了一个脚本，可以通过 AirDrop 直接发送到手机。然后，你只需运行一次 `sync-inbox` 脚本，这个新脚本就会被自动安装到你的脚本列表中，整个过程无需手动复制粘贴代码，实现了无缝的跨设备工作流。

#### 2. `addin-gallery.js`：构建在线脚本市场

- **功能目标**：这个示例完美诠释了如何利用 JSBox 创建一个第三方的“脚本商店”或“插件中心”。它从一个在线地址获取脚本列表，并提供给用户浏览和安装。

- **实现猜想与技术解读**：
  1.  **网络请求**：脚本启动后，会使用 `$http.get()` 向一个预设的 URL 发起请求。这个 URL 指向一个 JSON 文件，该文件定义了所有可供安装的脚本信息（如名称、作者、描述、图标以及最重要的——代码下载地址）。
  2.  **UI 渲染**：获取到 JSON 数据后，脚本会使用 `$ui.render()` 创建一个图文并茂的列表界面，将所有在线脚本展示给用户。
  3.  **动态安装**：当用户点击某个脚本的“安装”按钮时，该按钮的 `tap` 事件会触发另一个 `$http.get()` 请求，去下载该脚本的真实代码（一个 `.js` 文件）。下载完成后，立即调用 `$addin.save()` 将其安装到 JSBox 中。

- **应用场景**：这是 `$addin` API 最典型的应用。许多 JSBox 玩家都创建了自己的脚本分享平台，其背后都是基于类似 `addin-gallery.js` 的原理。它整合了网络、UI 和脚本管理三大功能，是综合性最强的示例之一。

### 安全提示解读

> “JSBox 默认并不会提供任何安装脚本的方式，这是出于安全考虑。”

这句话是理解 JSBox 设计哲学的关键。

- **为何不内置“商店”**：直接提供一个官方或第三方脚本市场，意味着需要对市场内的脚本进行安全审核。一旦审核不严，恶意脚本（如窃取隐私、删除文件）就可能对用户造成伤害。
- **将选择权交给用户**：JSBox 的选择是，它只提供“能力”（`$addin` API），而不提供“内容”。用户想安装第三方脚本，必须首先自己找到并安装一个类似 `addin-gallery` 的“安装器”脚本。这个行为本身就代表了“我信任这个安装器的来源”。这是一种将安全责任和选择权完全交给用户的设计，虽然牺牲了便利性，但最大限度地保障了安全性。

# å†…ç½®æ¨¡å—

ä¸ºäº†æ›´æ–¹ä¾¿ä½¿ç”¨ï¼ŒJSBox å†…ç½®äº†ä¸€äº›å¸¸è§çš„æ¨¡å—ï¼š

- [underscore](https://underscorejs.org/)
- [moment](https://momentjs.com/)
- [crypto-js](https://github.com/brix/crypto-js)
- [cheerio](https://cheerio.js.org/)
- [lodash](https://lodash.com/)
- [ramba](https://ramdajs.com/)

è¿™äº›æ¨¡å—æ— éœ€æ‰“åŒ…åœ¨å®‰è£…åŒ…å†…éƒ¨å³å¯è¢«è„šæœ¬é€šè¿‡ require ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š

```js
const lodash = require("lodash");
```

è¯·å‚è€ƒæ¨¡å—å„è‡ªçš„æ–‡æ¡£æ¥ä½¿ç”¨ï¼Œåœ¨æœ¬æ–‡æ¡£ä¸­ä¸å†èµ˜è¿°ã€‚

å¦‚æœæœ‰å…¶ä»–æ¨¡å—çš„ä½¿ç”¨éœ€æ±‚ï¼Œå¯ä»¥é€šè¿‡ [browserify](http://browserify.org/) è¿›è¡Œæ‰“åŒ…ï¼Œæ²¡æœ‰ native ä¾èµ–å¹¶ç¬¦åˆ [CommonJS](https://en.wikipedia.org/wiki/CommonJS) æ ‡å‡†çš„æ¨¡å—ä¸€èˆ¬å¯ä»¥ä½¿ç”¨ã€‚

---

## æ–‡ä»¶å†…å®¹è§£è¯»ä¸ç¤ºä¾‹

### ç”¨é€”è¯´æ˜ï¼šJSBox çš„â€œå¼€ç®±å³ç”¨â€æ¨¡å—

æœ¬æ–‡æ¡£ä»‹ç»äº† JSBox è¿è¡Œæ—¶ç¯å¢ƒä¸­**é¢„å…ˆå†…ç½®çš„ JavaScript æ¨¡å—**ã€‚è¿™äº›æ¨¡å—æ˜¯å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå®ƒä»¬è¢«ç›´æ¥é›†æˆåˆ° JSBox å†…éƒ¨ï¼Œå¼€å‘è€…å¯ä»¥åœ¨è‡ªå·±çš„è„šæœ¬ä¸­ç›´æ¥é€šè¿‡ `require()` è¯­å¥ä½¿ç”¨å®ƒä»¬ï¼Œè€Œæ— éœ€æ‰‹åŠ¨ä¸‹è½½ã€æ‰“åŒ…æˆ–ç®¡ç†è¿™äº›åº“çš„æ–‡ä»¶ã€‚è¿™æå¤§åœ°ç®€åŒ–äº†å¼€å‘æµç¨‹ï¼Œå‡å°‘äº†è„šæœ¬ä½“ç§¯ï¼Œå¹¶æå‡äº†è„šæœ¬çš„åŠ è½½é€Ÿåº¦ã€‚

### æ ¸å¿ƒæ¦‚å¿µï¼šæ— éœ€å®‰è£…ï¼Œç›´æ¥å¼•ç”¨

-   **å…¨å±€å¯ç”¨**: è¿™äº›å†…ç½®æ¨¡å—å°±åƒ Node.js ç¯å¢ƒä¸­çš„æ ¸å¿ƒæ¨¡å—ä¸€æ ·ï¼Œå®ƒä»¬æ˜¯ JSBox è¿è¡Œæ—¶ç¯å¢ƒçš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯ä½ è„šæœ¬é¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚
-   **`require()` è¯­æ³•**: ä½¿ç”¨æ ‡å‡†çš„ CommonJS `require()` è¯­æ³•æ¥å¼•å…¥è¿™äº›æ¨¡å—ã€‚

### å†…ç½®æ¨¡å—åˆ—è¡¨ä¸ç”¨é€”ç®€è¿°

JSBox å†…ç½®äº†ä»¥ä¸‹å¸¸ç”¨æ¨¡å—ï¼Œå®ƒä»¬è¦†ç›–äº†æ•°æ®å¤„ç†ã€æ—¥æœŸæ“ä½œã€åŠ å¯†ã€HTML è§£æç­‰å¤šä¸ªæ–¹é¢ï¼š

-   **`underscore` / `lodash`**: ä¸¤ä¸ªåŠŸèƒ½ç›¸ä¼¼çš„å®ç”¨å·¥å…·åº“ï¼Œæä¾›äº†å¤§é‡ç”¨äºæ•°ç»„ã€å¯¹è±¡ã€å‡½æ•°ç­‰æ“ä½œçš„ä¾¿æ·æ–¹æ³•ï¼Œæ˜¯ JavaScript å¼€å‘ä¸­çš„â€œç‘å£«ğŸ‡¨ğŸ‡­å†›åˆ€â€ã€‚`lodash` é€šå¸¸è¢«è®¤ä¸ºæ˜¯ `underscore` çš„å¢å¼ºç‰ˆã€‚
-   **`moment`**: å¼ºå¤§çš„æ—¥æœŸå’Œæ—¶é—´å¤„ç†åº“ï¼Œç”¨äºè§£æã€æ ¼å¼åŒ–ã€æ“ä½œå’Œæ˜¾ç¤ºæ—¥æœŸæ—¶é—´ã€‚
-   **`crypto-js`**: åŠ å¯†ç®—æ³•åº“ï¼Œæä¾›äº† MD5ã€SHA ç³»åˆ—å“ˆå¸Œã€AES åŠ å¯†/è§£å¯†ç­‰å¤šç§å¯†ç å­¦ç®—æ³•ã€‚
-   **`cheerio`**: ä¸€ä¸ªè½»é‡çº§çš„ã€ç±»ä¼¼äº jQuery çš„æœåŠ¡å™¨ç«¯ HTML è§£æå™¨ï¼Œç”¨äºå¿«é€Ÿã€çµæ´»åœ°è§£æ HTML å­—ç¬¦ä¸²å¹¶è¿›è¡Œ DOM æ“ä½œã€‚
-   **`ramda`**: ä¸€ä¸ªä¸“æ³¨äºå‡½æ•°å¼ç¼–ç¨‹çš„å·¥å…·åº“ï¼Œæä¾›äº†è®¸å¤šçº¯å‡½æ•°ï¼Œæœ‰åŠ©äºç¼–å†™æ›´ç®€æ´ã€å¯æµ‹è¯•çš„ä»£ç ã€‚

### ç¤ºä¾‹ä»£ç ï¼šä½¿ç”¨ `moment` å’Œ `lodash`

ä¸‹é¢çš„ç¤ºä¾‹å°†æ¼”ç¤ºå¦‚ä½•åœ¨ JSBox è„šæœ¬ä¸­ç›´æ¥ä½¿ç”¨ `moment` åº“æ¥æ ¼å¼åŒ–æ—¥æœŸï¼Œä»¥åŠä½¿ç”¨ `lodash` åº“æ¥å¤„ç†æ•°ç»„ã€‚

```javascript
// å¼•å…¥å†…ç½®æ¨¡å—
const moment = require("moment");
const _ = require("lodash");

$ui.render({
  props: { title: "å†…ç½®æ¨¡å—ç¤ºä¾‹" },
  views: [
    {
      type: "label",
      props: { id: "date-label", lines: 0 },
      layout: make => make.top.left.right.inset(20)
    },
    {
      type: "label",
      props: { id: "array-label", lines: 0 },
      layout: make => make.top.equalTo(view.prev.bottom).offset(20).left.right.inset(20)
    },
    {
      type: "button",
      props: { title: "æ‰§è¡Œç¤ºä¾‹" },
      layout: make => make.top.equalTo(view.prev.bottom).offset(20).centerX.equalTo(view.super).width.equalTo(120),
      events: {
        tapped: () => {
          // ä½¿ç”¨ moment æ ¼å¼åŒ–å½“å‰æ—¥æœŸ
          const now = moment();
          const formattedDate = now.format("YYYYå¹´MMæœˆDDæ—¥ HH:mm:ss");
          $("date-label").text = `å½“å‰æ—¶é—´ (Moment.js):\n${formattedDate}`;

          // ä½¿ç”¨ lodash å¤„ç†æ•°ç»„
          const numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
          const evenNumbers = _.filter(numbers, n => n % 2 === 0); // è¿‡æ»¤å¶æ•°
          const doubledNumbers = _.map(evenNumbers, n => n * 2); // ç¿»å€
          const sumOfDoubled = _.sum(doubledNumbers); // æ±‚å’Œ

          $("array-label").text = `åŸå§‹æ•°ç»„: ${JSON.stringify(numbers)}\nå¶æ•°: ${JSON.stringify(evenNumbers)}\nç¿»å€å: ${JSON.stringify(doubledNumbers)}\næ€»å’Œ: ${sumOfDoubled}`;

          $ui.toast("ç¤ºä¾‹å·²æ‰§è¡Œï¼");
        }
      }
    }
  ]
});
```

**ä»£ç è§£è¯»**ï¼š

1.  é€šè¿‡ `const moment = require("moment");` å’Œ `const _ = require("lodash");`ï¼Œæˆ‘ä»¬ç›´æ¥å¼•å…¥äº†è¿™ä¸¤ä¸ªå†…ç½®æ¨¡å—ã€‚
2.  åœ¨æŒ‰é’®çš„ `tapped` äº‹ä»¶ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«è°ƒç”¨äº† `moment()` æ¥è·å–å½“å‰æ—¶é—´å¹¶æ ¼å¼åŒ–ï¼Œä»¥åŠ `_.filter()`ã€`_.map()`ã€`_.sum()` ç­‰ `lodash` æ–¹æ³•æ¥å¯¹æ•°ç»„è¿›è¡Œé“¾å¼æ“ä½œã€‚

### æ€»ç»“

JSBox çš„å†…ç½®æ¨¡å—æå¤§åœ°ä¸°å¯Œäº†è„šæœ¬çš„åŠŸèƒ½ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿåˆ©ç”¨æˆç†Ÿçš„ç¬¬ä¸‰æ–¹åº“æ¥è§£å†³å„ç§å¤æ‚çš„ç¼–ç¨‹é—®é¢˜ï¼Œè€Œæ— éœ€æ‹…å¿ƒä¾èµ–ç®¡ç†ã€‚å½“ä½ é‡åˆ°éœ€è¦è¿›è¡Œæ—¥æœŸå¤„ç†ã€æ•°æ®æ“ä½œã€åŠ å¯†è§£å¯†æˆ– HTML è§£æç­‰ä»»åŠ¡æ—¶ï¼Œè¯·ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨è¿™äº›å†…ç½®æ¨¡å—ã€‚ 
